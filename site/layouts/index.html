{{ define "main" }}

<div class="relative bg-redarkgrey bg-cover bg-center w-full home flex flex-col items-center pt-16 md:pt-32 pb-16">

    <h1 class="title text-2xl sm:text-4xl lg:text-5xl">
        {{ .Params.slogan }}
    </h1>
    <h2 class="w-8/12 md:w-3/12 text-white text-center md:text-xl font-semibold mt-2 md:mt-4">
        {{ .Params.subtitle }}
    </h2>

    <div class="w-10/12 md:w-7/12 flex flex-row flex-wrap bg-white text-rered rounded-2xl mt-8 md:mt-16 py-2 px-4 md:py-4">
        <div class="w-full md:w-1/3 flex flex-col items-center px-6 py-4">
            <img class="h-12 md:h-14" src="/img/page-home/serviette.svg" alt="" aria-hidden="true">
            <span class="mt-2 md:mt-4 text-xl md:text-3xl font-extrabold">
                {{ .Params.numbers.first.number }}
            </span>
            <p class="md:mt-2 text-sm md:text-base text-center font-bold tracking-tight leading-5">
                {{ .Params.numbers.first.text }}
            </p>
        </div>
        <div class="w-full md:w-1/3 flex flex-col items-center px-6 py-4 border-y md:border-y-0 border-x-0 md:border-x border-rered">
            <img class="h-12 md:h-14" src="/img/page-home/talk.svg" alt="" aria-hidden="true">
            <span class="mt-2 md:mt-4 text-xl md:text-3xl font-extrabold">
                {{ .Params.numbers.second.number }}
            </span>
            <p class="md:mt-2 text-sm md:text-base text-center font-bold tracking-tight leading-5">
                {{ .Params.numbers.second.text }}
            </p>
        </div>
        <div class="w-full md:w-1/3 flex flex-col items-center px-6 py-4">
            <img class="h-12 md:h-14" src="/img/page-home/cycle.svg" alt="" aria-hidden="true">
            <span class="mt-2 md:mt-4 text-xl md:text-3xl font-extrabold">
                {{ .Params.numbers.third.number }}
            </span>
            <p class="md:mt-2 text-sm md:text-base  text-center font-bold tracking-tight leading-5">
                {{ .Params.numbers.third.text }}
            </p>
        </div>
    </div>
</div>
<div class="w-full bg-rered">
    <div class="w-full pt-8 md:pt-12 pb-12 md:pb-16 flex flex-row">
        <div class="w-11/12 md:w-4/5 mx-auto">
            <h2 class="text-white text-center text-xl md:text-3xl font-extrabold uppercase">
                {{ .Params.actions.title | markdownify }}    
            </h2>
            <div class="flex flex-row flex-wrap text-white mt-8 md:mt-16">
                <div class="w-full md:w-1/4 flex flex-col items-center px-10">
                    <div class="w-40 h-40 bg-white rounded-full flex justify-center">
                        <img src="/img/page-home/collecter.svg" alt="" aria-hidden="true" />                    
                    </div>                    
                    <h3 class="md:h-16 flex items-center mt-6 tracking-tight text-lg md:text-2xl text-center font-bold uppercase">
                        {{ .Params.actions.collecter_title | markdownify }}
                    </h3>   
                    <a class="mt-6 text-center tracking-tighter font-semibold border-b border-white pb-1" href="/actions/collecter">
                        {{ .Params.actions.button }}
                    </a>               
                </div>
                <div class="w-full md:w-1/4 flex flex-col items-center px-10 mt-8 md:mt-0">
                    <div class="w-40 h-40 bg-white rounded-full flex justify-center">     
                        <img src="/img/page-home/sensibiliser.svg" alt="" aria-hidden="true" />               
                    </div>
                    <h3 class="md:h-16 flex items-center mt-6 tracking-tight text-lg md:text-2xl text-center font-bold uppercase">
                        {{ .Params.actions.sensibiliser_title | markdownify }}
                    </h3>
                    <a class="mt-6 text-center tracking-tighter font-semibold border-b border-white pb-1" href="/actions/sensibiliser">
                        {{ .Params.actions.button }}
                    </a>
                </div>
                <div class="w-full md:w-1/4 flex flex-col items-center px-10 mt-8 md:mt-0">
                    <div class="w-40 h-40 bg-white rounded-full flex justify-center">     
                        <img src="/img/page-home/former.svg" alt="" aria-hidden="true" />               
                    </div>
                    <h3 class="md:h-16 flex items-center mt-6 tracking-tight text-lg md:text-2xl text-center font-bold uppercase">
                        {{ .Params.actions.former_title | markdownify }}
                    </h3>
                    <a class="mt-6 text-center tracking-tighter font-semibold border-b border-white pb-1" href="/actions/former">
                        {{ .Params.actions.button }}
                    </a>
                </div>
                <div class="w-full md:w-1/4 flex flex-col items-center px-10 mt-8 md:mt-0">
                    <div class="w-40 h-40 bg-white rounded-full flex justify-center">  
                        <img src="/img/page-home/mobiliser.svg" alt="" aria-hidden="true" />                  
                    </div>
                    <h3 class="md:h-16 flex items-center mt-6 tracking-tight text-lg md:text-2xl text-center font-bold uppercase">
                        {{ .Params.actions.mobiliser_title | markdownify }}
                    </h3>
                    <a class="mt-6 text-center tracking-tighter font-semibold border-b border-white pb-1" href="/actions/mobiliser">
                        {{ .Params.actions.button }}
                    </a>
                </div>                 
            </div>
        </div>
    </div>
</div>
<div class="w-full bg-white py-8 md:py-12">
    <div class="w-11/12 md:w-4/5 flex flex-row flex-wrap mx-auto">
        <div class="w-full md:w-1/3 flex flex-col px-2 text-rered">
            <h2 class="text-xl md:text-3xl font-extrabold uppercase">
                {{ .Params.agir.title }}    
            </h2>
            <p class="text-sm md:text-base font-medium tracking-tighter mt-4 md:mt-8">
                {{ .Params.agir.text }} 
            </p>
        </div>
        <div class="w-1/2 md:w-1/3 flex flex-col flex-wrap items-start mt-4 md:mt-6 text-rered">
            <h4 class="ml-2 md:ml-4 mb-2 md:mb-4 text-reorange uppercase font-bold">{{ .Params.agir.person_title }}</h4>
            {{ range .Site.Menus.main }}
                {{ if eq .Identifier "agir"}}
                    {{ range .Children }}
                        <button data-agir="{{ .Identifier }}" class="agir-button flex items-center font-medium my-0.5 md:mx-2 px-2 py-0.5 text-sm md:text-base uppercase rounded-full hover:border focus:border border-reorange text-left">
                            {{ .Name }}
                            <img class="ml-2 hidden" src="/img/page-home/check.svg" alt="" aria-hidden="true" />
                        </button>
                    {{ end }}
                {{ end }}
            {{ end }}
        </div>
        <div class="w-1/2 md:w-1/3 flex flex-row mt-4 md:mt-6 text-rered md:border-l border-rered">
            <div class="hidden md:flex w-1/12 flex-col justify-center">
                <img src="img/page-home/arrow.png" alt="" aria-hidden="true" />
            </div>
            <div class="w-full md:w-11/12 flex flex-col flex-wrap items-start pl-2">
                <h4 class="ml-2 md:ml-4 mb-2 md:mb-4 text-reorange uppercase font-bold">{{ .Params.agir.action_title }}</h4>
                {{ range .Site.Menus.main }}
                    {{ if eq .Identifier "agir"}}
                        {{ range .Children }}
                            <div class="hidden actions-container w-full items-start flex flex-col flex-wrap" data-agir="{{ .Identifier }}">
                                {{ range .Children}}
                                    <a href="{{.URL}}" class="font-medium my-0.5 md:mx-2 px-2 py-0.5 text-sm md:text-base uppercase rounded-full hover:border border-reorange text-left">
                                        <div class="flex">
                                            {{ .Name }}
                                            <img class="hidden ml-2" src="/img/page-home/check.svg" alt="" aria-hidden="true" />
                                        </div>                                        
                                    </a>
                                {{ end }}
                            </div>
                        {{ end }}
                    {{ end }}
                {{ end }}
            </div>
            
        </div>
    </div>
</div>

<div class="w-full bg-rered py-8 md:py-12">
    <div class="w-11/12 md:w-4/5 mx-auto flex flex-row flex-wrap">
        <div class="w-full flex flex-row flex-wrap px-4 mb-4 md:mb-8">
            <h2 class="text-white text-xl md:text-2xl font-extrabold uppercase self-center md:mr-4">{{ .Params.donations.title }}</h2>
            
            <fieldset class="w-full md:w-2/5 tabs-donations text-white uppercase mt-4 md:mt-0">
                <legend class="hidden">récurrence du don</legend>
                <input type="radio" id="radio-1" name="tabs" />
                <label class="tab-donations w-1/2" for="radio-1" id="radio-1-label" tabindex="0">{{ .Params.donations.radio1 }}</label>
                <input type="radio" id="radio-2" name="tabs" checked />
                <label class="tab-donations w-1/2" for="radio-2" id="radio-2-label" tabindex="0">{{ .Params.donations.radio2 }}</label>
                <span class="glider w-1/2"></span>
            </fieldset>
        </div>    
        
        <p class="text-white px-4 text-md md:mb-8">Tandis que le coût de la vie ne cesse d’augmenter, les règles demeurent un impensé et la précarité menstruelle ne cesse de se renforcer. Nous avons besoin de vos dons pour que plus aucune femme ne mette en péril sa santé pendant ses règles !</p>

        <div id="once-donations" class="hidden flex-row flex-wrap items-stretch">
            {{ range .Params.donations.once }}
                <div class="w-full md:w-1/4 px-4 mt-6 md:mt-0">
                    <a href="{{ .link }}" target="_blank">
                        <div class="rounded-3xl flex flex-col bg-white h-full">
                            <div class="bg-reorange py-4 rounded-t-3xl text-4xl md:text-5xl font-extrabold text-white text-center">{{ .amount }}</div>
                            <img class="h-6 mt-4" src="{{ .icon_link }}" alt="" aria-hidden="true" />
                            <div class="text-rered py-4 px-8 text-center leading-5">{{ .text }}</div>
                            <div class="text-rered text-center font-bold mb-6 mt-auto underline">{{ .btn_text }}</div>
                        </div>
                    </a>
                </div>
            {{ end }}
        </div>

        <div id="regular-donations" class="flex flex-row flex-wrap items-stretch">
            {{ range .Params.donations.regular }}
                <div class="w-full md:w-1/4 px-4 mt-6 md:mt-0">
                    <a href="{{ .link }}" target="_blank">
                        <div class="rounded-3xl flex flex-col bg-white h-full">
                            <div class="bg-reorange py-4 rounded-t-3xl text-4xl md:text-5xl font-extrabold text-white text-center">{{ .amount }}</div>
                            <img class="h-6 mt-4" src="{{ .icon_link }}" alt="" aria-hidden="true" />
                            <div class="text-rered py-4 px-8 text-center leading-5">{{ .text }}</div>
                            <div class="text-rered text-center font-bold mb-6 mt-auto underline">{{ .btn_text }}</div>
                        </div>
                    </a>
                </div>
            {{ end }}
        </div>
    </div>

</div>

<div class="w-full bg-white py-8 md:py-12">    
    <div class="w-11/12 md:w-4/5 mx-auto flex flex-row flex-wrap">
        <div class="w-full md:w-1/2 flex">
            <div class="bg-rered mx-2 md:mx-4 rounded-2xl text-white flex flex-col">
                <h3 class="mx-8 mt-6 md:mt-10 text-xl md:text-2xl font-extrabold uppercase">
                    {{ .Params.map.title }}
                </h3>
                <p class="mx-8 mt-4 tracking-tight text-sm">
                    {{ .Params.map.text }}
                </p>
                <div class="mx-8 mt-4 font-semibold tracking-tight text-sm">
                    <a href="/agir/particulier/donner" class="border-b border-white pb-1">
                        {{ .Params.map.link_text }}
                    </a>
                </div>  
                <div class="rounded-2xl mt-10 grow" style="min-height:20rem;">
                    <iframe aria-label="carte des collectes" class="w-full h-full rounded-2xl" src="https://collectes.regleselementaires.com/map/home_vitrine"></iframe>
                </div>                      
            </div>                      
        </div>
        <div class="w-full md:w-1/2 mt-8 md:mt-0">
            <div class="md:h-full rounded-2xl border border-reorange flex flex-col mx-2 md:mx-4 p-4 md:px-8 md:py-10 bg-white">
                <h3 class="text-xl md:text-2xl font-extrabold uppercase text-rered mt-2 md:mt-0">
                    {{ .Params.agenda.title }}
                </h3>
                <div class="w-full mt-4 border-t border-rered flex flex-col text-rered">
                    {{ $sortedEvents := sort .Site.Data.events ".date" "desc" }}

                        <div class="w-full flex flex-row">
                            <div class="w-1/4 md:w-1/5 py-4 md:border-r border-rered">
                                {{ .Params.agenda.date_title }}
                            </div>  
                            <div class="w-3/4 md:w-4/5 py-4 pl-4">
                                {{ .Params.agenda.event_title }}
                            </div>
                        </div>
                        {{ $mymonths := index $.Site.Data.months }}                 
                        {{ $mydays := index $.Site.Data.days }}                  
                        {{ range first 5 $sortedEvents }}
                            <div class="w-full flex flex-row">
                                <div class="w-1/4 md:w-1/5 py-4 md:border-r border-rered flex flex-col justify-center">
                                    {{ if ne .month true }}
                                    {{ with .date2 }}
                                    {{ else }}
                                    <span class="text-xs" style="margin-bottom: -0.4rem;">
                                        {{ $day := dateFormat "Mon" .date }}
                                        {{ index $mydays $day }}
                                    </span>                 
                                    {{ end }}           
                                    <span class="text-xl md:text-2xl font-bold">
                                        {{ dateFormat "02" .date }}{{ with .date2 }}-{{ dateFormat "02" . }}{{ end }}
                                    </span>  
                                    {{ end }}         
                                    <span class="{{if eq .month true}}text-sm md:text-md capitalize{{else}}text-sm{{end}}" style="margin-top: -0.4rem;">
                                        {{ $month := dateFormat "Jan" .date }}
                                        {{ index $mymonths $month }}
                                    </span>                 
                                </div>
                                <div class="w-3/4 md:w-4/5 pl-4 py-2 flex">
                                    {{ with .link }}
                                        <a href="{{.}}" class="h-full w-full" target="_blank">
                                    {{ end }}
                                    <div class="p-4 w-full flex flex-row shadow-md rounded-xl items-center text-sm md:text-base">                                        
                                        <span class="font-bold">{{ .place }}</span>
                                        <span class="mx-2">/</span>
                                        <span class="">{{ .name }}</span>                                        
                                    </div>
                                    {{ with .link }}
                                        </a>
                                    {{ end }}
                                </div>
                            </div>                            
                        {{ end }}
                   
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ACTUS 
<div class="w-full bg-reorange">
    <div class="container pt-8 md:pt-12 flex flex-row">
        <div class="w-11/12 lg:w-5/6 pb-8 m-auto">
            <h2 class="text-white text-xl md:text-3xl font-extrabold text-center uppercase md:pb-4">
                {{ .Params.actus.title }}
            </h2>
            {{ $sortedPages := sort (where .Site.RegularPages "Section" "actualites") ".Params.date" "desc" }}
            <div class="flex flex-wrap">
                <div class="w-11/12 md:w-4/5 flex flex-col flex-wrap items-center md:mt-4 mx-auto">
                    {{ range first 1 $sortedPages }}
                        {{ .Render "li-home" }}
                    {{ end }}
                    {{ range first 1 (after 1 $sortedPages) }}
                        {{ .Render "li-home-reversed" }}
                    {{ end }}

                </div>

            </div>
            
        </div>

    </div>
</div>
-->

<div class="w-full bg-reorange">
    <div class="container pt-8 md:pt-12 flex flex-row">
        <div class="w-11/12 md:w-4/5 pb-8 m-auto">
            <h2 class="text-white text-xl md:text-3xl font-extrabold uppercase pb-8 md:ml-4 ml-2">
                {{ .Params.decouvrir.title }}
            </h2>
            <div class="flex flex-row flex-wrap">
                <div class="w-full md:w-1/2 flex">
                    <div class="bg-white mx-2 md:mx-4 rounded-2xl text-rered flex flex-col px-8 md:px-16 py-8 text-center tracking-tight">
                        <h3 class="text-lg font-bold">{{ .Params.decouvrir.pr.title }}</h3>
                        <p class="mt-4 mb-8">{{ .Params.decouvrir.pr.text }}</p>
                        <img src="/img/page-home/apercu-PR.png" alt="">
                        <a class="mt-8 font-bold underline" href="https://www.parlonsregles.fr/" target="_blank">{{ .Params.decouvrir.pr.link }}</a>
                    </div>
                </div>
                <div class="w-full md:w-1/2 flex">
                    <div class="bg-white mx-2 md:mx-4 rounded-2xl text-rered flex flex-col px-8 md:px-16 py-8 text-center tracking-tight mt-8 md:mt-0">
                        <h3 class="text-lg font-bold">{{ .Params.decouvrir.regla.title }}</h3>
                        <p class="mt-4 mb-8">{{ .Params.decouvrir.regla.text }}</p>
                        <img src="/img/page-home/apercu-regla.png" alt="">
                        <a class="mt-8 font-bold underline" href="https://www.regla-app.fr/" target="_blank">{{ .Params.decouvrir.regla.link }}</a>
                    </div>
                </div> 
            </div>                                  
        </div>
    </div>
</div>

<script>
    let agirButtons = document.getElementsByClassName("agir-button");
	let actionsContainer = document.getElementsByClassName("actions-container");

    for (var i = 0; i < agirButtons.length; i++) {
        agirButtons[i].onclick = function(e){
            // hide all containers
            for (var i = 0; i < actionsContainer.length; i++) {
                actionsContainer[i].classList.add("hidden");
            }
            // show selected container
            let action = document.querySelector("div[data-agir=" + CSS.escape(e.target.dataset.agir) + "]");
            action.classList.remove("hidden");
        }
    }

    let radio1 = document.getElementById("radio-1");
    let radio2 = document.getElementById("radio-2");
    let radio1Label = document.getElementById("radio-1-label");
    let radio2Label = document.getElementById("radio-2-label");
    let once = document.getElementById("once-donations");
    let regular = document.getElementById("regular-donations");
    
    // handle click
    radio1.addEventListener('click', event => {
        once.classList.add("flex");
        once.classList.remove("hidden");
        regular.classList.add("hidden");
        regular.classList.remove("flex");
    });    
    radio2.addEventListener('click', event => {
        regular.classList.add("flex");
        regular.classList.remove("hidden");
        once.classList.add("hidden");
        once.classList.remove("flex");
    });

    // handle enter keypress
    radio1Label.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            once.classList.add("flex");
            once.classList.remove("hidden");
            regular.classList.add("hidden");
            regular.classList.remove("flex");
        }
    });
    radio2Label.addEventListener('keypress', function (e) {
        if (e.key === 'Enter') {
            regular.classList.add("flex");
            regular.classList.remove("hidden");
            once.classList.add("hidden");
            once.classList.remove("flex");
        }
    });

</script>
{{ end }}